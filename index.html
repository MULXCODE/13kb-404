<!DOCTYPE html><html lang="en"><head><title>13kb 404</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><style>body{background-color: #fff;margin: 0;}canvas{display: block;}#VRButton{color: blue !important;background-color: white !important;bottom: 40px !important;border-radius: 0 !important;opacity: 1 !important;}</style></head><body><script type="module">import{CylinderBufferGeometry as n,BufferAttribute as t,Mesh as e,IcosahedronBufferGeometry as o,MeshNormalMaterial as i,Group as r,MeshBasicMaterial as a,BackSide as s,MultiplyBlending as c,Float32BufferAttribute as d,BufferGeometry as u,CircleBufferGeometry as p,InstancedMesh as w,Raycaster as l,Object3D as f,Scene as h,Color as g,PerspectiveCamera as A,AudioLoader as v,AudioListener as y,Audio as m,WebGLRenderer as b,Vector3 as x,Line as z,LineBasicMaterial as M}from"https://unpkg.com/three@0.120.1/build/three.module.js";import{VRButton as j}from"https://unpkg.com/three@0.120.1/examples/jsm/webxr/VRButton.js";var Y={songData:[{i:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,0,0,32,0,0,0,0],p:[1,1,1,1],c:[{n:[147,,,,,,147,,147,,,,,,147,,,,147,,,,,,147,,,147,,,,,135,,,,,,135,,135,,,,,,135,,,,135,,,,,,135,,,135,,,,,123,,,,,,123,,123,,,,,,123,,,,123,,,,,,123,,,123,,,,,111,,,,,,111,,111,,,,,,111,,,,111,,,,,,111,,,111],f:[]}]},{i:[3,0,128,1,3,68,128,0,1,25,4,4,40,0,0,1,55,4,0,2,67,115,124,188,67,6,39,1],p:[1,1,1,1],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,139,,,,,,,,139,,,,,,,,139,,,,,,,,139],f:[]}]},{i:[0,192,128,0,0,192,140,18,0,0,107,115,138,3,1,0,136,5,0,2,8,92,21,32,29,5,85,8],p:[1,2,3,2],c:[{n:[151],f:[]},{n:[152],f:[]},{n:[154],f:[]}]},{i:[3,163,128,0,3,154,128,9,0,0,15,5,31,0,0,0,0,0,0,2,255,193,0,32,47,3,146,2],p:[1,1,1,1],c:[{n:[111,111,111,111,123,123,123,123,111,111,111,111,123,123,123,123,111,111,111,111,123,123,123,123,111,111,111,111,123,123,123,123],f:[]}]},{i:[2,40,128,0,3,80,128,0,0,0,5,6,58,0,0,0,195,6,0,2,64,68,0,33,164,6,121,6],p:[1,1,1,1],c:[{n:[99,,,,,,,,111,,,,,,,,99,,,,,,,,111,,,,,,,,111,,,,,,,,123,,,,,,,,111,,,,,,,,123,,,,,,,,123,,,,,,,,135,,,,,,,,123,,,,,,,,135],f:[]}]},{i:[2,100,116,1,2,99,128,3,1,0,47,47,60,124,2,0,139,4,0,3,62,160,3,32,198,4,121,5],p:[],c:[]},{i:[1,91,128,0,1,95,128,12,0,0,12,0,25,0,0,0,255,8,1,3,24,157,0,32,83,3,130,4],p:[],c:[]},{i:[0,158,128,0,1,152,116,14,0,0,11,22,11,0,0,0,69,3,1,3,88,106,0,24,77,6,31,4],p:[1,2,3,2],c:[{n:[147,,151,147,,151,147,,151,147,,151,147,,151,147,,151,147,,151,147,,151,147,,151,147,,151,147],f:[]},{n:[151,,154,151,,154,151,,154,151,,154,151,,154,151,,154,151,,154,151,,154,151,,154,151,,154,151],f:[]},{n:[154,,151,154,,151,154,,151,154,,151,154,,151,154,,151,154,,151,154,,151,154,,151,154,,151,154],f:[]}]}],rowLen:5513,patternLen:32,endPattern:3,numChannels:8},q=function(){var n,t,e,o,i,r=function(n){return Math.sin(6.283184*n)},a=function(n){return.003959503758*Math.pow(2,(n-128)/12)},s=function(n,t,e){var o,i,r,s,d,u,p,w=c[n.i[0]],l=n.i[1],f=n.i[3],h=c[n.i[4]],g=n.i[5],A=n.i[8],v=n.i[9],y=n.i[10]*n.i[10]*4,m=n.i[11]*n.i[11]*4,b=n.i[12]*n.i[12]*4,x=1/b,z=n.i[13],M=e*Math.pow(2,2-n.i[14]),j=new Int32Array(y+m+b),Y=0,q=0;for(o=0,i=0;o<y+m+b;o++,i++)i>=0&&(i-=M,u=a(t+(15&(z=z>>8|(255&z)<<4))+n.i[2]-128),p=a(t+(15&z)+n.i[6]-128)*(1+8e-4*n.i[7])),r=1,o<y?r=o/y:o>=y+m&&(r-=(o-y-m)*x),s=u,f&&(s*=r*r),d=w(Y+=s)*l,s=p,A&&(s*=r*r),d+=h(q+=s)*g,v&&(d+=(2*Math.random()-1)*v),j[o]=80*d*r|0;return j},c=[r,function(n){return n%1<.5?1:-1},function(n){return n%1*2-1},function(n){var t=n%1*4;return t<2?t-1:3-t}];this.init=function(r){n=r,t=r.endPattern,e=0,o=r.rowLen*r.patternLen*(t+1)*2,i=new Int32Array(o)},this.generate=function(){var a,d,u,p,w,l,f,h,g,A,v,y,m,b,x=new Int32Array(o),z=n.songData[e],M=n.rowLen,j=n.patternLen,Y=0,q=0,I=!1,L=[];for(u=0;u<=t;++u)for(f=z.p[u],p=0;p<j;++p){var O=f?z.c[f-1].f[p]:0;O&&(z.i[O-1]=z.c[f-1].f[p+j]||0,O<16&&(L=[]));var C=c[z.i[15]],G=z.i[16]/512,K=Math.pow(2,z.i[17]-9)/M,Q=z.i[18],R=z.i[19],W=43.23529*z.i[20]*3.141592/44100,E=1-z.i[21]/255,k=1e-5*z.i[22],P=z.i[23]/32,D=z.i[24]/512,T=6.283184*Math.pow(2,z.i[25]-9)/M,H=z.i[26]/255,U=z.i[27]*M&-2;for(v=(u*j+p)*M,w=0;w<4;++w)if(l=f?z.c[f-1].n[p+w*j]:0){L[l]||(L[l]=s(z,l,M));var B=L[l];for(d=0,a=2*v;d<B.length;d++,a+=2)x[a]+=B[d]}for(d=0;d<M;d++)(A=x[h=2*(v+d)])||I?(y=W,Q&&(y*=C(K*h)*G+.5),q+=(y=1.5*Math.sin(y))*(m=E*(A-q)-(Y+=y*q)),A=3==R?q:1==R?m:Y,k&&(A=(A*=k)<1?A>-1?r(.25*A):-1:1,A/=k),I=(A*=P)*A>1e-5,b=A*(1-(g=Math.sin(T*h)*D+.5)),A*=g):b=0,h>=U&&(b+=x[h-U+1]*H,A+=x[h-U]*H),x[h]=0|b,x[h+1]=0|A,i[h]+=0|b,i[h+1]+=0|A}return++e/n.numChannels},this.createWave=function(){var n=44+2*o-8,t=n-36,e=new Uint8Array(44+2*o);e.set([82,73,70,70,255&n,n>>8&255,n>>16&255,n>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&t,t>>8&255,t>>16&255,t>>24&255]);for(var r=0,a=44;r<o;++r){var s=i[r];s=s<-32767?-32767:s>32767?32767:s,e[a++]=255&s,e[a++]=s>>8&255}return e},this.getData=function(n,t){for(var e=2*Math.floor(44100*n),o=new Array(t),r=0;r<2*t;r+=1){var a=e+r;o[r]=n>0&&a<i.length?i[a]/32768:0}return o}};function I(){const n=new q;return{generate:async function(t){return n.init(t),new Promise((function(t,e){const o=setInterval((function(){if(!0===n.generate()>=1){clearInterval(o);const e=n.createWave(),i=new Blob([e],{type:"audio/wav"});t(URL.createObjectURL(i))}}),0)}))}}}const L=new Image;L.src="data:image/gif;base64,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";const O=[0,0,1,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1],C=[0,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1,0],G=[0,0,0,1,0,0,0,1,0,1,1,0,0,1,0,1,0,0],K=[0,0,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1],Q=[0,0,0,0,1,0,0,0,1,0,1,1,0,0,1,0,1,0],R=[1,0,0,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1],W=new n(.5,.5,.5,5).translate(0,.25,0),E=W.attributes.position.array,k=new Float32Array(E.length);for(let n=0;n<E.length;n+=3)k[n+0]=k[n+1]=k[n+2]=E[n+1]>0?10:1;W.setAttribute("color",new t(k,3));const P=new e(new o(.25),new i);function D(n){const t=new r,o=new e(W,new a({color:16720418,vertexColors:!0,side:s,blending:c,transparent:!0}));t.add(o);const i=new e(W,new a({color:2237183,vertexColors:!0,side:s,blending:c,transparent:!0}));t.add(i);const p=new r;t.add(p);const w=document.createElement("canvas");w.width=64,w.height=64;const l=n%4,f=Math.floor(n/4),h=w.getContext("2d");h.drawImage(L,64*-l,64*-f);const g=h.getImageData(0,0,64,64).data,A=[];for(let n=0,t=0;n<g.length;n+=4,t++){const e=t%64,r=Math.floor(t/64),a=T(g,n);if(a>0&&(H(A,O,e,r),H(A,C,e,r),0===T(g,n-4)&&H(A,Q,e,r),0===T(g,n+4)&&H(A,R,e,r),0===T(g,n-256)&&H(A,G,e,r),0===T(g,n+256)&&H(A,K,e,r),16711680===a&&o.position.set(e+.5,.01,r+.5),255===a&&i.position.set(e+.5,.01,r+.5),65280===a)){const n=P.clone();n.position.set(e+.5,1,r+.5),p.add(n)}}const v=new d(A,3),y=new u;y.setAttribute("position",v),y.computeVertexNormals();const m=new a,b=new e(y,m);return b.scale.y=2,t.add(b),{group:t,update:function(){for(let n=0;n<p.children.length;n++){const t=p.children[n];t.rotation.x+=.01,t.rotation.y+=.01}o.rotation.y+=.02,i.rotation.y+=.02}}}function T(n,t){return n[t+0]<<16|n[t+1]<<8|n[t+2]}function H(n,t,e,o){for(let i=0;i<18;i+=3)n.push(t[i+0]+e,t[i+1],t[i+2]+o)}const U=new p(.2,5).translate(0,0,.01),B=new a({color:16711680,depthWrite:!1}),X=new w(U,B,200);X.count=0,X.renderOrder=1;const V=new r,F=new function(){let n=0;return{mesh:X,add:function(t){X.setMatrixAt(n++,t),X.instanceMatrix.needsUpdate=!0,n>200&&(n=0),X.count<n&&(X.count=n)},reset:function(){X.count=0,n=0}}};V.add(F.mesh);const S=new l,J=new f;function Z(){let n;return{setMap:function(t){n=t,F.reset()},group:V,shoot:function(t){S.ray.origin.setFromMatrixPosition(t.matrixWorld),S.ray.direction.set(0,0,-1).applyQuaternion(t.quaternion).applyQuaternion(t.parent.quaternion);const e=S.intersectObject(n.group.children[3]);if(e.length>0){const n=e[0];J.position.set(0,0,0),J.lookAt(n.face.normal),J.rotation.z=Math.random()*Math.PI,J.position.copy(n.point),J.updateMatrix(),console.log(J.quaternion.toArray()),F.add(J.matrix)}}}}let N,$,_,nn,tn,en,on,rn,an,sn,cn,dn,un,pn,wn=1,ln=!0;function fn(n){void 0!==rn&&$.remove(rn.group),!0===ln&&(n=0),rn=new D(n),$.add(rn.group);const t=rn.group.children;if(an=t[0],sn=t[1],cn=t[2],!0===ln){const n=rn.group.children[3];n.scale.y=.5,n.geometry.center();const t=n.clone();t.material=new a({color:187}),t.position.y=-2,rn.group.add(t),an.visible=!1,sn.position.set(0,-3,0),sn.scale.setScalar(70)}nn.position.copy(an.position),nn.rotation.set(0,Math.PI,0),dn.setMap(rn)}function hn(){N.aspect=window.innerWidth/window.innerHeight,N.updateProjectionMatrix(),_.setSize(window.innerWidth,window.innerHeight)}function gn(n){let t=n.target;if(t.userData.gamepad=n.data.gamepad,t.userData.handedness=n.data.handedness,"right"===n.data.handedness){let n=new u;n.setFromPoints([new x(0,0,0),new x(0,0,-1)]);let e=new z(n,new M({color:255}));e.scale.z=2,t.add(e)}}function An(n){const t=n.userData.gamepad;switch(n.userData.handedness){case"left":nn.rotateY(.03*-t.axes[2]);const e=.03*t.axes[3],o=Math.sin(e);on.ray.origin.copy(nn.position),on.ray.direction.set(0,0,o).applyQuaternion(nn.quaternion);const i=on.intersectObject(rn.group.children[3]);if(i.length>0){i[0].distance>e+1.5&&nn.translateZ(e)}break;case"right":t.buttons[0].pressed&&dn.shoot(n)}}function vn(){if(!0===ln){const n=performance.now()/5e3;rn.group.rotation.x=Math.sin(n)/4,rn.group.rotation.y=Math.PI,rn.group.rotation.z=Math.cos(1.1234*n)/4,N.position.y=50,N.position.z=2,N.rotation.x=-Math.PI/2}else An(tn),An(en),nn.position.distanceTo(sn.position)<1&&fn(++wn),rn.update();_.render($,N)}!async function(){$=new h,$.background=new g(16777215),nn=new r,$.add(nn),N=new A(70,window.innerWidth/window.innerHeight,.1,100),N.position.set(0,1.6,0),nn.add(N);const n=new I,t=await n.generate(Y),e=await(new v).loadAsync(t);un=new y,N.add(un),pn=new m(un),pn.setBuffer(e),pn.setLoop(!0),N.add(pn),dn=new Z,$.add(dn.group),fn(wn),_=new b({antialias:!0}),_.setAnimationLoop(vn),_.setPixelRatio(window.devicePixelRatio),_.setSize(window.innerWidth,window.innerHeight),_.xr.enabled=!0,_.xr.addEventListener("sessionstart",(function(){ln=!1,fn(wn),pn.play()})),_.xr.addEventListener("sessionend",(function(){ln=!0,fn(wn),pn.stop()})),document.body.appendChild(_.domElement),document.body.appendChild(j.createButton(_)),window.addEventListener("resize",hn,!1),tn=_.xr.getController(0),tn.addEventListener("connected",gn),nn.add(tn),en=_.xr.getController(1),en.addEventListener("connected",gn),nn.add(en),on=new l}();</script></body></html>
