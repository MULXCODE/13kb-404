<!DOCTYPE html><html lang="en"><head><title>13kb-404</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><style>body{background-color: #fff;margin: 0;}canvas{display: block;}#VRButton{color: blue !important;background-color: white !important;bottom: 40px !important;border-radius: 0 !important;opacity: 1 !important;}</style></head><body><script type="module">import{CylinderBufferGeometry as n,BufferAttribute as t,Mesh as e,IcosahedronBufferGeometry as o,MeshNormalMaterial as i,Group as a,MeshBasicMaterial as r,BackSide as s,MultiplyBlending as c,Float32BufferAttribute as d,BufferGeometry as l,CircleBufferGeometry as p,InstancedMesh as u,Raycaster as w,Object3D as f,Scene as h,Color as g,PerspectiveCamera as A,AdditiveBlending as y,AudioListener as m,AudioLoader as v,Audio as L,WebGLRenderer as b,Vector3 as M,Line as j,LineBasicMaterial as C}from"https://unpkg.com/three@0.120.1/build/three.module.js";import{VRButton as x}from"https://unpkg.com/three@0.120.1/examples/jsm/webxr/VRButton.js";var q={songData:[{i:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,0,0,32,0,0,0,0],p:[1,1,1,1],c:[{n:[147,,,,,,147,,147,,,,,,147,,,,147,,,,,,147,,,147,,,,,135,,,,,,135,,135,,,,,,135,,,,135,,,,,,135,,,135,,,,,123,,,,,,123,,123,,,,,,123,,,,123,,,,,,123,,,123,,,,,111,,,,,,111,,111,,,,,,111,,,,111,,,,,,111,,,111],f:[]}]},{i:[3,0,128,1,3,68,128,0,1,25,4,4,40,0,0,1,55,4,0,2,67,115,124,188,67,6,39,1],p:[1,1,1,1],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,139,,,,,,,,139,,,,,,,,139,,,,,,,,139],f:[]}]},{i:[0,192,128,0,0,192,140,18,0,0,107,115,138,3,1,0,136,5,0,2,8,92,21,32,29,5,85,8],p:[1,2,3,2],c:[{n:[151],f:[]},{n:[152],f:[]},{n:[154],f:[]}]},{i:[3,163,128,0,3,154,128,9,0,0,15,5,31,0,0,0,0,0,0,2,255,193,0,32,47,3,146,2],p:[1,1,1,1],c:[{n:[111,111,111,111,123,123,123,123,111,111,111,111,123,123,123,123,111,111,111,111,123,123,123,123,111,111,111,111,123,123,123,123],f:[]}]},{i:[2,40,128,0,3,80,128,0,0,0,5,6,58,0,0,0,195,6,0,2,64,68,0,33,164,6,121,6],p:[1,1,1,1],c:[{n:[99,,,,,,,,111,,,,,,,,99,,,,,,,,111,,,,,,,,111,,,,,,,,123,,,,,,,,111,,,,,,,,123,,,,,,,,123,,,,,,,,135,,,,,,,,123,,,,,,,,135],f:[]}]},{i:[2,100,116,1,2,99,128,3,1,0,47,47,60,124,2,0,139,4,0,3,62,160,3,32,198,4,121,5],p:[],c:[]},{i:[1,91,128,0,1,95,128,12,0,0,12,0,25,0,0,0,255,8,1,3,24,157,0,32,83,3,130,4],p:[],c:[]},{i:[0,158,128,0,1,152,116,14,0,0,11,22,11,0,0,0,69,3,1,3,88,106,0,24,77,6,31,4],p:[1,2,3,2],c:[{n:[147,,151,147,,151,147,,151,147,,151,147,,151,147,,151,147,,151,147,,151,147,,151,147,,151,147],f:[]},{n:[151,,154,151,,154,151,,154,151,,154,151,,154,151,,154,151,,154,151,,154,151,,154,151,,154,151],f:[]},{n:[154,,151,154,,151,154,,151,154,,151,154,,151,154,,151,154,,151,154,,151,154,,151,154,,151,154],f:[]}]}],rowLen:5513,patternLen:32,endPattern:3,numChannels:8},H={songData:[{i:[2,100,116,1,2,99,128,3,1,0,47,47,60,124,2,0,139,4,0,3,62,160,3,32,198,4,121,5],p:[1],c:[{n:[147,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123],f:[]}]}],rowLen:5513,patternLen:32,endPattern:0,numChannels:1},I={songData:[{i:[1,91,128,0,1,95,128,12,0,0,12,0,25,0,0,0,255,8,1,3,24,157,0,32,83,3,130,4],p:[1,1,1,1],c:[{n:[152,151,147,152,151,147,152,151,147,152,151,147,152,151,147,152,151,147,152,151,147,152,151,147,152,151,147,152,151,147,152,151,140,139,135,140,139,135,140,139,135,140,139,135,140,139,135,140,139,135,140,139,135,140,139,135,140,139,135,140,139,135,140,139],f:[]}]}],rowLen:5513,patternLen:32,endPattern:3,numChannels:1},D={songData:[{i:[3,194,128,0,2,198,128,6,0,0,12,12,33,0,0,0,61,4,1,2,109,86,7,32,112,3,67,2],p:[1],c:[{n:[151],f:[]}]}],rowLen:5513,patternLen:8,endPattern:0,numChannels:1},B=function(){var n,t,e,o,i,a=function(n){return Math.sin(6.283184*n)},r=function(n){return.003959503758*Math.pow(2,(n-128)/12)},s=function(n,t,e){var o,i,a,s,d,l,p,u=c[n.i[0]],w=n.i[1],f=n.i[3],h=c[n.i[4]],g=n.i[5],A=n.i[8],y=n.i[9],m=n.i[10]*n.i[10]*4,v=n.i[11]*n.i[11]*4,L=n.i[12]*n.i[12]*4,b=1/L,M=n.i[13],j=e*Math.pow(2,2-n.i[14]),C=new Int32Array(m+v+L),x=0,q=0;for(o=0,i=0;o<m+v+L;o++,i++)i>=0&&(i-=j,l=r(t+(15&(M=M>>8|(255&M)<<4))+n.i[2]-128),p=r(t+(15&M)+n.i[6]-128)*(1+8e-4*n.i[7])),a=1,o<m?a=o/m:o>=m+v&&(a-=(o-m-v)*b),s=l,f&&(s*=a*a),d=u(x+=s)*w,s=p,A&&(s*=a*a),d+=h(q+=s)*g,y&&(d+=(2*Math.random()-1)*y),C[o]=80*d*a|0;return C},c=[a,function(n){return n%1<.5?1:-1},function(n){return n%1*2-1},function(n){var t=n%1*4;return t<2?t-1:3-t}];this.init=function(a){n=a,t=a.endPattern,e=0,o=a.rowLen*a.patternLen*(t+1)*2,i=new Int32Array(o)},this.generate=function(){var r,d,l,p,u,w,f,h,g,A,y,m,v,L,b=new Int32Array(o),M=n.songData[e],j=n.rowLen,C=n.patternLen,x=0,q=0,H=!1,I=[];for(l=0;l<=t;++l)for(f=M.p[l],p=0;p<C;++p){var D=f?M.c[f-1].f[p]:0;D&&(M.i[D-1]=M.c[f-1].f[p+C]||0,D<16&&(I=[]));var B=c[M.i[15]],O=M.i[16]/512,K=Math.pow(2,M.i[17]-9)/j,z=M.i[18],P=M.i[19],E=43.23529*M.i[20]*3.141592/44100,W=1-M.i[21]/255,k=1e-5*M.i[22],S=M.i[23]/32,X=M.i[24]/512,N=6.283184*Math.pow(2,M.i[25]-9)/j,Q=M.i[26]/255,R=M.i[27]*j&-2;for(y=(l*C+p)*j,u=0;u<4;++u)if(w=f?M.c[f-1].n[p+u*C]:0){I[w]||(I[w]=s(M,w,j));var Y=I[w];for(d=0,r=2*y;d<Y.length;d++,r+=2)b[r]+=Y[d]}for(d=0;d<j;d++)(A=b[h=2*(y+d)])||H?(m=E,z&&(m*=B(K*h)*O+.5),q+=(m=1.5*Math.sin(m))*(v=W*(A-q)-(x+=m*q)),A=3==P?q:1==P?v:x,k&&(A=(A*=k)<1?A>-1?a(.25*A):-1:1,A/=k),H=(A*=S)*A>1e-5,L=A*(1-(g=Math.sin(N*h)*X+.5)),A*=g):L=0,h>=R&&(L+=b[h-R+1]*Q,A+=b[h-R]*Q),b[h]=0|L,b[h+1]=0|A,i[h]+=0|L,i[h+1]+=0|A}return++e/n.numChannels},this.createWave=function(){var n=44+2*o-8,t=n-36,e=new Uint8Array(44+2*o);e.set([82,73,70,70,255&n,n>>8&255,n>>16&255,n>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&t,t>>8&255,t>>16&255,t>>24&255]);for(var a=0,r=44;a<o;++a){var s=i[a];s=s<-32767?-32767:s>32767?32767:s,e[r++]=255&s,e[r++]=s>>8&255}return e},this.getData=function(n,t){for(var e=2*Math.floor(44100*n),o=new Array(t),a=0;a<2*t;a+=1){var r=e+a;o[a]=n>0&&r<i.length?i[r]/32768:0}return o}};function O(){const n=new B;return{generate:async function(t){return n.init(t),new Promise((function(t,e){const o=setInterval((function(){if(!0===n.generate()>=1){clearInterval(o);const e=n.createWave(),i=new Blob([e],{type:"audio/wav"});t(URL.createObjectURL(i))}}),0)}))}}}function K(e,o){const i=new n(.5,.5,.5,5).translate(0,.25,0),a=i.attributes.position.array,r=new Float32Array(a.length);for(let n=0;n<a.length;n+=3)r[n+0]=r[n+1]=r[n+2]=a[n+1]>0?e:o;return i.setAttribute("color",new t(r,3)),i}const z=new Image;z.src="data:image/gif;base64,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";const P=[0,0,1,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1],E=[0,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1,0],W=[0,0,0,1,0,0,0,1,0,1,1,0,0,1,0,1,0,0],k=[0,0,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1],S=[0,0,0,0,1,0,0,0,1,0,1,1,0,0,1,0,1,0],X=[1,0,0,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1],N=new K(10,1),Q=new e(new o(.25),new i);function R(n){const t=new a,o=new e(N,new r({color:16720418,vertexColors:!0,side:s,blending:c,transparent:!0}));o.scale.y=2,t.add(o);const i=new e(N,new r({color:2237183,vertexColors:!0,side:s,blending:c,transparent:!0}));i.scale.y=2,t.add(i);const p=new a;t.add(p);const u=document.createElement("canvas");u.width=64,u.height=64;const w=n%4,f=Math.floor(n/4),h=u.getContext("2d");h.drawImage(z,64*-w,64*-f);const g=h.getImageData(0,0,64,64).data,A=[];for(let n=0,t=0;n<g.length;n+=4,t++){const e=t%64,a=Math.floor(t/64),r=Y(g,n);if(r>0&&(G(A,P,e,a),G(A,E,e,a),0===Y(g,n-4)&&G(A,S,e,a),0===Y(g,n+4)&&G(A,X,e,a),0===Y(g,n-256)&&G(A,W,e,a),0===Y(g,n+256)&&G(A,k,e,a),16711680===r&&o.position.set(e+.5,.01,a+.5),255===r&&i.position.set(e+.5,.01,a+.5),65280===r)){const n=Q.clone();n.position.set(e+.5,1,a+.5),p.add(n)}}const y=new d(A,3),m=new l;m.setAttribute("position",y),m.computeVertexNormals();const v=new r,L=new e(m,v);return L.scale.y=2,t.add(L),{group:t,update:function(){for(let n=0;n<p.children.length;n++){const t=p.children[n];t.rotation.x+=.01,t.rotation.y+=.01}o.rotation.y+=.02,i.rotation.y+=.02}}}function Y(n,t){return n[t+0]<<16|n[t+1]<<8|n[t+2]}function G(n,t,e,o){for(let i=0;i<18;i+=3)n.push(t[i+0]+e,t[i+1],t[i+2]+o)}const Z=new p(.2,5).translate(0,0,.01),J=new r({color:16711680,depthWrite:!1}),T=new u(Z,J,200);T.count=0,T.renderOrder=1;const U=new a,V=new function(){let n=0;return{mesh:T,add:function(t){T.setMatrixAt(n++,t),T.instanceMatrix.needsUpdate=!0,n>200&&(n=0),T.count<n&&(T.count=n)},reset:function(){T.count=0,n=0}}};U.add(V.mesh);const F=new w,$=new f;function _(){let n;return{setMap:function(t){n=t,V.reset()},group:U,shoot:function(t){F.ray.origin.setFromMatrixPosition(t.matrixWorld),F.ray.direction.set(0,0,-1).applyQuaternion(t.quaternion).applyQuaternion(t.parent.quaternion);const e=F.intersectObject(n.group.children[3]);if(e.length>0){const n=e[0];$.position.set(0,0,0),$.lookAt(n.face.normal),$.rotation.z=Math.random()*Math.PI,$.position.copy(n.point),$.updateMatrix(),console.log($.quaternion.toArray()),V.add($.matrix)}}}}let nn,tn,en,on,an,rn,sn,cn,dn,ln,pn,un,wn,fn,hn,gn,An,yn=1,mn=!0;function vn(n){void 0!==dn&&tn.remove(dn.group),!0===mn&&(n=0),dn=new R(n),tn.add(dn.group);const t=dn.group.children;if(ln=t[0],pn=t[1],un=t[2],!0===mn){const n=dn.group.children[3];n.scale.y=.5,n.geometry.center();const t=n.clone();t.material=new r({color:187}),t.position.y=-2,dn.group.add(t),ln.visible=!1,pn.position.set(0,-3,0),pn.scale.setScalar(70)}on.position.copy(ln.position),on.rotation.set(0,Math.PI,0),cn.setMap(dn)}function Ln(){nn.aspect=window.innerWidth/window.innerHeight,nn.updateProjectionMatrix(),en.setSize(window.innerWidth,window.innerHeight)}function bn(n){mn=!1,vn(yn),fn.play()}function Mn(n){mn=!0,vn(yn),fn.stop()}function jn(n){let t=n.target;if(t.userData.gamepad=n.data.gamepad,t.userData.handedness=n.data.handedness,"right"===n.data.handedness){let n=new l;n.setFromPoints([new M(0,0,0),new M(0,0,-1)]);let e=new j(n,new C({color:255}));e.scale.z=2,t.add(e)}}!async function(){tn=new h,tn.background=new g(16777215),on=new a,tn.add(on),nn=new A(70,window.innerWidth/window.innerHeight,.1,100),nn.position.set(0,1.6,0),on.add(nn);const n=new r({color:255,vertexColors:!0,side:s,depthTest:!1,blending:y,transparent:!0}),t=new e(new K(0,1),n);t.rotation.x=-Math.PI/2,t.scale.y=5,nn.add(t),wn=new m,nn.add(wn);const o=new v,i=new O;fn=new L(wn),fn.setBuffer(await o.loadAsync(await i.generate(q))),fn.setLoop(!0),nn.add(fn),hn=new L(wn),hn.setBuffer(await o.loadAsync(await i.generate(H))),nn.add(hn),gn=new L(wn),gn.setBuffer(await o.loadAsync(await i.generate(I))),nn.add(gn),An=new L(wn),An.setBuffer(await o.loadAsync(await i.generate(D))),nn.add(An),cn=new _,tn.add(cn.group),vn(yn),en=new b({antialias:!0}),en.setAnimationLoop(qn),en.setPixelRatio(window.devicePixelRatio),en.setSize(window.innerWidth,window.innerHeight),en.xr.enabled=!0,en.xr.addEventListener("sessionstart",bn),en.xr.addEventListener("sessionend",Mn),document.body.appendChild(en.domElement),document.body.appendChild(x.createButton(en)),window.addEventListener("resize",Ln,!1),an=en.xr.getController(0),an.addEventListener("connected",jn),on.add(an),rn=en.xr.getController(1),rn.addEventListener("connected",jn),on.add(rn),sn=new w}();let Cn=0;function xn(n){const t=n.userData.gamepad;switch(n.userData.handedness){case"left":let e=Math.sign(-Math.round(t.axes[2]));Cn!==e&&(on.rotateY(.3*e),Cn=e);const o=.03*t.axes[3],i=Math.sin(o);sn.ray.origin.copy(on.position),sn.ray.direction.set(0,0,i).applyQuaternion(on.quaternion);const a=sn.intersectObject(dn.group.children[3]);if(a.length>0){a[0].distance>o+1.5&&on.translateZ(o)}break;case"right":t.buttons[0].pressed?(cn.shoot(n),!1===gn.isPlaying&&gn.play()):!0===gn.isPlaying&&gn.stop()}}function qn(){if(!0===mn){const n=performance.now()/5e3;dn.group.rotation.x=Math.sin(n)/4,dn.group.rotation.y=Math.PI,dn.group.rotation.z=Math.cos(1.1234*n)/4,nn.position.y=50,nn.position.z=2,nn.rotation.x=-Math.PI/2}else{xn(an),xn(rn),on.position.distanceTo(pn.position)<1&&(hn.play(),vn(++yn));for(let n=0;n<un.children.length;n++){const t=un.children[n];!0===t.visible&&on.position.distanceTo(t.position)<1.5&&(An.play(),t.visible=!1)}dn.update()}en.render(tn,nn)}</script></body></html>
